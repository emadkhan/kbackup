#!/usr/bin/env bash
set -eo pipefail

SEMVER_REGEX='^v[0-9]+\.[0-9]+\.[0-9]+$'
[[ ! $1 =~ $SEMVER_REGEX ]] && echo "must pass in a valid semver version" && exit 1

[[ -z $2 ]] && echo "must pass in release description " && exit 1

git tag $1
git push --all

bin/clean
bin/build
gh release create $1 --notes "$2" build/*
